# Recipe YAML Schema (JSON Schema in YAML format)
# Validates the standard header for recipes
# Version: 0.1.0

$schema: "https://json-schema.org/draft/2020-12/schema"
title: RecipeHeader
type: object
additionalProperties: false
properties:
  topology:
    type: string
    enum: [solo, multi, rag, tools-first]
    description: Processing topology for the recipe
  roles:
    type: array
    minItems: 1
    items:
      type: object
      additionalProperties: false
      properties:
        name:
          type: string
        provider:
          type: string
          enum: [openai, gemini, qwen]
        model:
          type: string
        temperature:
          type: number
          minimum: 0
          maximum: 2
      required: [name, provider, model]
  tools:
    type: array
    items:
      type: string
  bench_id:
    type: string
  prompt_variants:
    type: array
    items:
      type: object
      additionalProperties: false
      properties:
        id:
          type: string
        desc:
          type: string
      required: [id]
  constraints:
    type: array
    items:
      type: string
  tool_mode:
    type: string
    enum: [auto, required, none]
    description: Provider-agnostic tool policy; maps to OpenAI tool_choice, Gemini function_calling_config, or Qwen tool choice
  tool_aliases:
    type: object
    additionalProperties:
      type: string
required: [topology, roles, tools, bench_id]
