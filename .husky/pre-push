#!/usr/bin/env sh

# Run repository-wide Markdown checks before pushing
npx --yes markdownlint $(git ls-files '*.md') || exit 1

files=$(git ls-files '*.md' | tr '\n' ' ')
if [ -n "$files" ]; then
  for f in $files; do
    npx --yes markdown-link-check -q -c .mlc.config.json "$f" || exit 1
  done
fi
